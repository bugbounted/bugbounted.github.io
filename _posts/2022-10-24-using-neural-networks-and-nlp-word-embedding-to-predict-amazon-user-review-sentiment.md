---
layout: post
title: چگونه یک EDA برای سری های زمانی انجام دهیم
tags:
- علمی
- برنامه نویسی
- هوش مصنوعی
categories:
- AI

---
## تجزیه و تحلیل اکتشافی سری زمانی نمایه پانداها

![](https://irncdn.netlify.app/max/700/0*UXtE3lYd-CDw5RHu)

عکس توسط [Aron Visuals ](https://unsplash.com/@aronvisuals?utm_source=medium&utm_medium=referral)در [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)

یکی از گام‌های اولیه در چرخه توسعه علم داده، درک و کاوش داده‌ها برای مشکلی است که در حال حل آن هستید. EDA گامی حیاتی برای گردش کار بهتر علم داده است و پروفایل پانداها انتخاب ترجیحی من برای انجام سریع و با یک خط کد بوده و در عین حال خروجی هایی را برای درک بهتر داده ها و کشف بینش های معنادار در اختیار من قرار می دهد.

احتمالاً شما از Pandas Profileing برای داده‌های جدولی ساختاریافته استفاده کرده‌اید، که معمولاً اولین نوع داده‌ای است که یاد می‌گیریم کاوش کنیم، همه ما اکنون مجموعه داده Iris هستیم، درست است؟ با این حال، در برنامه‌های کاربردی دنیای واقعی، نوع دیگری از ساختار داده وجود دارد که معمولاً می‌توانیم آن را در روز پیدا کنیم: از ترافیک، مسیرهای روزانه یا حتی مصرف برق و آب، همه آنها یک چیز مشترک دارند - زمانی. وابستگی

داده‌های سری زمانی یا متوالی به یکی از با ارزش‌ترین کالاها در دنیایی تبدیل شده‌اند که روز به روز بیشتر مبتنی بر داده‌ها است، که نیاز به انجام EDA و استخراج داده‌های سری زمانی را به مهارت بسیار مورد نیاز متخصصان علم داده تبدیل می‌کند.

با توجه به ماهیت داده‌های سری زمانی، و هنگام کاوش مجموعه داده، نوع تجزیه و تحلیل با زمانی که رکوردهای مجموعه داده‌ها همه مستقل در نظر گرفته می‌شوند، متفاوت است. پیچیدگی تجزیه و تحلیل با افزودن بیش از یک موجودیت در یک مجموعه داده افزایش می یابد.

در این وبلاگ من برخی از مراحل کلیدی در تجزیه و تحلیل یک مجموعه داده را بررسی می‌کنم و در عین حال از ویژگی‌های سری زمانی نمایه‌سازی پانداها استفاده می‌کنم. مجموعه داده بررسی شده به [کیفیت هوا در ایالات متحده ](https://www.epa.gov/outdoor-air-quality-data)و می توانید از [وب سایت EPA ](https://www.epa.gov/outdoor-air-quality-data/download-daily-data).*

کد کامل و نمونه ها را می توانید در [مخزن GitHub بیابید ](https://github.com/ydataai/pandas-profiling/tree/master/examples/usaairquality)تا بتوانید آموزش را دنبال کنید.

# تجزیه و تحلیل چندین موجودیت در یک مجموعه داده سری زمانی

توضیحات داده ها می گوید که این داده های کیفیت هوا است که در مانیتورهای فضای باز در سراسر ایالات متحده، پورتوریکو و جزایر ویرجین ایالات متحده جمع آوری شده است. با این اطلاعات، ما متوجه می شویم که این یک داده سری زمانی چند متغیره است که دارای چندین نهاد است که باید آنها را در نظر بگیریم.

با دانستن این موضوع، من چند سؤال بعدی دارم: چند مکان در مورد اقدامات مربوط به آلاینده ها موجود است؟ آیا همه حسگرها در یک بازه زمانی یکسان داده های یکسانی را جمع آوری می کنند؟ اقدامات جمع آوری شده در زمان و مکان چگونه توزیع می شود؟

برخی از این سوالات را می توان به راحتی با یک نقشه حرارتی که تمام اندازه گیری ها و مکان ها را با زمان مقایسه می کند، همانطور که در قطعه کد و تصویر زیر نشان داده شده است، پاسخ داد:

کد برای تولید نقشه حرارتی زمان با پانداها

![](https://irncdn.netlify.app/max/700/0*hIUQjQabxDFktWVa)

نقشه حرارتی مجموعه داده کیفیت هوای ایالات متحده (تصویر توسط نویسنده)

نمودار بالا نقاط داده هر موجودیت را در طول زمان نشان می دهد. مشاهده می‌کنیم که همه ایستگاه‌ها به طور همزمان شروع به جمع‌آوری داده‌ها نکرده‌اند، و بر اساس شدت نقشه حرارتی، می‌توانیم متوجه شویم که برخی از ایستگاه‌ها نقاط داده‌ای بیشتری نسبت به بقیه برای یک دوره زمانی معین دارند.

این بدان معناست که هنگام مدل‌سازی سری‌های زمانی، داشتن مهر زمانی پویا برای مجموعه داده‌های آموزشی و آزمایشی ممکن است بهتر از داشتن مهر زمانی از پیش تعیین‌شده باشد. ما همچنین باید سوابق مفقود شده و دامنه ثبت سوابق را بیشتر بررسی کنیم.

با این درک اولیه از اینکه توزیع زمانی موجودیت‌های ما چگونه به نظر می‌رسد، می‌توانیم برای بینش‌های بیشتر وارد پروفایل داده‌ها شویم. از آنجایی که چندین سری زمانی وجود دارد، بیایید نگاهی به رفتار هر نهاد بیندازیم.

# بررسی معیارهای سری زمانی

اگر قبلاً از pandas-profiling استفاده می‌کردید، احتمالاً می‌دانید که چگونه [گزارش نمایه را ایجاد کنید ](https://pub.towardsai.net/advanced-eda-made-simple-using-pandas-profiling-35f83027061a).

پشتیبانی از سری های زمانی را می توان با پاس دادن پارامتر _tsmode_ = **true** کرد، و کتابخانه به طور خودکار وجود ویژگی ها را با همبستگی خودکار شناسایی می کند (در ادامه در این مورد بیشتر خواهد شد). برای اینکه تجزیه و تحلیل به درستی انجام شود، چارچوب داده باید بر اساس ستون های موجودیت و زمان مرتب شود، در غیر این صورت همیشه می توانید از **مرتب** .

کد این کار به همین سادگی است:

در اینجا گزارش خروجی با استفاده از حالت سری زمانی به نظر می رسد:

![](https://irncdn.netlify.app/max/600/0*-VHA-ZVHyCkL0yeB)

گزارش تصویری پانداها (نمایش توسط نویسنده)

## هشدارهای فصلی و غیر ثابت

مخصوص تجزیه و تحلیل سری های زمانی، می توانیم 2 هشدار جدید را شناسایی کنیم - **NON_STATIONARY** و **.** ساده ترین دلیل برای درک سریع سری های زمانی خود، نگاهی به بخش هشدارها است. برای این مورد خاص، هر گزارش نمایه رفتار خاص هر مکان ایالات متحده را در مورد اندازه گیری آلاینده ها به تصویر می کشد.

این هشدارها در گزارش ما به این صورت است:

![](https://irncdn.netlify.app/max/600/0*7hojTc4M_-ASITkG)

هشدار در پروفایل (پخش توسط نویسنده)

به یک سری زمانی ثابت گفته می شود که ویژگی های آماری آن (مانند میانگین و واریانس) در طول زمانی که سری مشاهده می شود تغییر نکند. برعکس، یک سری زمانی زمانی غیر ساکن است که ویژگی های آماری آن به زمان بستگی داشته باشد. به عنوان مثال، سری های زمانی با روند و فصلی (در ادامه در مورد آن بیشتر) ثابت نیستند - این پدیده ها می توانند ارزش سری های زمانی را در زمان های مختلف تحت تاثیر قرار دهند.

تجزیه و تحلیل فرآیندهای ثابت نسبتاً ساده تر است زیرا یک رابطه ایستا بین زمان و متغیرها وجود دارد. در واقع، ثابت بودن به یک فرض رایج برای اکثر تحلیل های سری زمانی تبدیل شده است.

در حالی که [مدل‌هایی برای سری‌های زمانی غیر ثابت ](https://people.stat.sc.edu/hitchcock/stat520ch5slides.pdf)، اکثر الگوریتم‌های ML انتظار یک رابطه ثابت بین ویژگی‌های ورودی و خروجی را دارند. زمانی که سری زمانی ثابت نباشد، دقت مدل مدل‌سازی شده از داده‌ها در نقاط مختلف متفاوت خواهد بود. این بدان معناست که انتخاب‌های مدل‌سازی تحت تأثیر ماهیت ثابت/غیر ثابت سری‌های زمانی قرار می‌گیرند، و مراحل مختلف آماده‌سازی داده‌ها زمانی اعمال می‌شوند که می‌خواهید [سری‌های زمانی ](https://analyticsindiamag.com/how-to-make-a-time-series-stationary/)را به یک سری ثابت تبدیل کنید.

بنابراین این هشدار به شما کمک می کند چنین ستون هایی را شناسایی کرده و سری های زمانی را بر اساس آن پیش پردازش کنید.

فصلی بودن در سری های زمانی سناریویی است که در آن داده ها تغییرات منظم و قابل پیش بینی را تجربه می کنند که در یک چرخه تعریف شده تکرار می شوند. این فصلی بودن ممکن است سیگنالی را که می‌خواهیم در مدل‌سازی سری‌های زمانی مدل‌سازی کنیم، پنهان کند، و حتی بدتر از آن، ممکن است سیگنال قوی به مدل‌ها ارائه دهد. این هشدار می تواند به شما در شناسایی چنین ستون هایی کمک کند و به شما هشدار دهد که فصلی بودن را برطرف کنید.

**اطلاعات بیشتر در مورد ویژگی های وابسته به زمان**

اولین تفاوتی که متوجه خواهید شد این است که نمودار خط جایگزین هیستوگرام برای ستونی می شود که به عنوان وابسته به زمان شناسایی شده است. با استفاده از نمودار خط، می‌توانیم مسیر و ماهیت ستون انتخابی را بهتر درک کنیم. برای این نمودار خط میانگین NO2، شاهد یک روند نزولی در مسیر، با تغییرات فصلی پیوسته، با حداکثر مقدار ثبت شده در مراحل اولیه سری هستیم.

![](https://irncdn.netlify.app/max/700/0*H5GtbKk7ZDtFbdRh =700x429)

جزئیات ویژگی یک ستون (تصویر توسط نویسنده)

در مرحله بعد، وقتی برای جزئیات بیشتر ستون تغییر وضعیت می دهیم (همانطور که در شکل بالا نشان داده شده است)، یک برگه جدید با نمودارهای همبستگی خودکار و همبستگی جزئی مشاهده خواهیم کرد.

برای سری های زمانی، همبستگی خودکار نشان می دهد که چگونه رابطه یک سری زمانی در مقدار فعلی آن با مقادیر قبلی آن مرتبط است. خودهمبستگی جزئی، خودهمبستگی یک سری زمانی پس از حذف اثر تاخیرهای زمانی قبلی است. این بدان معناست که این نمودارها برای ارائه اطلاعات مربوط به درجات خودهمبستگی سری های مورد تجزیه و تحلیل و همچنین درجه میانگین متحرک بسیار مهم هستند.

نمودارهای ACF و PACF بالا همانطور که انتظار می رود کمی مبهم هستند. با نگاهی به اخطارهای ما، می‌توانیم ببینیم که **میانگین NO2** یک _غیر ثابت_ است که قابلیت تفسیر این نمودارها را حذف می‌کند. با این وجود، نمودار ACF برای تأیید آنچه قبلاً مشکوک بودیم مفید است - **میانگین NO2** غیر ثابت است - زیرا مقادیر نمودار ACF به جای اینکه به سرعت به صفر برسند همانطور که برای سری های ثابت انتظار می رود، بسیار آهسته کاهش می یابد.

اطلاعات جمع‌آوری‌شده از نمایه‌سازی داده‌ها، ماهیت سری‌های زمانی، و هشدارهایی مانند غیر ثابت بودن و فصلی بودن، به شما در درک داده‌های سری زمانی که در دست دارید، می‌توانید شروع کنید. این بدان معنا نیست که شما با تجزیه و تحلیل داده های اکتشافی تمام شده اید - هدف استفاده از این بینش ها به عنوان نقطه شروع و کار بر روی تجزیه و تحلیل عمیق بیشتر داده ها و مراحل آماده سازی داده های بیشتر است.

از نمایه‌سازی مجموعه داده کیفیت هوا، چندین ستون را مشاهده می‌کنیم که ثابت هستند، که ممکن است هنگام مدل‌سازی ارزش زیادی اضافه نکنند. از نمودار مقادیر گمشده، می‌بینیم که شاخص‌های کیفیت هوای SO2 و CO2 داده‌های گمشده‌ای دارند - ما باید تأثیر این و دامنه انتساب یا حذف این ستون‌ها را بیشتر بررسی کنیم. چندین ستون با هشدارهای غیر ایستا و فصلی پیدا شد، گام‌های بعدی یا ثابت کردن آنها یا اطمینان از اینکه مدل‌هایی که استفاده می‌کنیم می‌توانند نقاط داده غیر ثابت را مدیریت کنند، خواهد بود.

شما این ایده را دریافت کرده اید - به عنوان دانشمندان داده، استفاده از ابزارهای پروفایل برای به دست آوردن سریع یک نمای کلی از داده ها (در سری های زمانی مورد ما)، و بازرسی بیشتر و تصمیم گیری آگاهانه در مورد مراحل پیش پردازش و مدل سازی داده ها مهم است.

# نتیجه گیری

شعار Pandas Profileng همیشه یکسان بوده است: «داده ها را بخوانید؟ مکث کنید. گزارش Pandas Profiling را ایجاد کنید و داده ها را بررسی کنید. اکنون تمیز کردن را شروع کنید و دوباره در کاوش داده ها تکرار کنید."

اگرچه داده‌های جدولی ساختاریافته رایج‌ترین داده‌ها در هنگام ارائه اولین قدم‌های علم داده باقی می‌مانند، داده‌های سری زمانی به طور گسترده مورد استفاده قرار می‌گیرند و برای توسعه بسیاری از راه‌حل‌های تجاری و مبتنی بر داده‌های پیشرفته هسته‌ای هستند. با توجه به ماهیت سری‌های زمانی و اینکه چگونه سوابق به زمان بستگی دارند و روی رخدادهای آینده تأثیر می‌گذارند - در مرحله تجزیه و تحلیل داده‌های اکتشافی، انواع مختلفی از بینش‌ها توسط دانشمندان داده جستجو می‌شوند.

بنابراین، زمان زیادی بود که کتابخانه Pandas Profileng ویژگی‌هایی را برای فعال کردن حالت تحلیل سری زمانی برای کشف این بینش‌ها گنجانده باشد. از تغییرات مورد نیاز کاربر برای به دست آوردن گزارش پروفایل سری زمانی خاص - تا خروجی هشدارهای جدید که نگرانی‌هایی را در داده‌ها، نمودارهای خطی و نمودارهای همبستگی که مختص تجزیه و تحلیل سری‌های زمانی هستند ایجاد می‌کند - همه چیز را در این نشان دادیم. مقاله.

اما معیارها و تحلیل‌هایی که امروز مورد بررسی قرار می‌گیرند، تنها آغاز کار است! قرار است به سوالات بیشتری پاسخ داده شود. و برای شما، رویکرد معمول شما هنگام تجزیه و تحلیل داده‌های سری زمانی چیست؟ هنگام کار با مجموعه داده های متوالی چه چیزی را بیشتر از همه از دست می دهید؟

**استناد:**

"آژانس حفاظت از محیط زیست ایالات متحده EPA" (دامنه عمومی) [http://www.ics.uci.edu/\~mlearn/MLRepository.html](http://www.ics.uci.edu/\~mlearn/MLRepository.html "http://www.ics.uci.edu/~mlearn/MLRepository.html")